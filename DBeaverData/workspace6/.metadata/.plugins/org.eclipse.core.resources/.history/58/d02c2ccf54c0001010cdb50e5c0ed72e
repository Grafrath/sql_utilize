create database if not exists academy_db
character set = utf8mb4
collate = utf8mb4_unicode_ci

# 주석
#사용자 만드는 방법
#create user : 유저를 만들겠다.
# 'app_user' : 생성할 계정의 이름
# '%' : 어느 ip에서든 접속 가능
# ex) 'app_user'@"192.1.1.2"
# identified by '비밀번호'

create user 'app_user'@'#' identified by '1234'

# CREATE, ALTER, DROP 테이블 관련 권한
# SELECT, INSERT, UPDATE, DELETE 데이터 조회/추가/수정/삭제 권한
GRANT CREATE, SELECT, INSERT, UPDATE, DELETE, ALTER, DROP 
ON academy_db.* 
TO 'app_user'@'#';

SHOW GRANTS FOR 'app_user'@'#';

USE academy_db;

CREATE TABLE TBL_ANIMAL (
	name varchar(30),
	age int -- 마지막에는 콤마를 찍지 않는다.
);

RENAME TABLE TBL_ANIMAL TO TBL_member;

CREATE TABLE TBL_Car (
	id int,
	brand varchar(100),
	color varchar(100),
	price int,
	CONSTRAINT car_PK PRIMARY KEY (id)
);

drop table TBL_car;

CREATE table ex01 (
	col1 varchar(10) not null,
	col2 varchar(10),
	create_date DATETIME DEFAULT CURRENT_TIMESTAMP()
);

# 테이블 변경
# CREATE문으로 테이블 생성후 불가피하게 수정해야 할 상황이 발생할 때가 많다.
#최초 설계가 잘못된 경우도 있고, 요구사항이 변경되기 때문이기도 하다.
#여러 원인으로 기존에 생성했던 속성의 데이터 타입을 수정하거나 삭제 또는
#새로운 속성을 넣어야 하는 경우가 발생할 수있다.


#새로운 컬럼 추가

alter table ex01 add column col3 varchar(50);

#컬럼 타입 변경
alter table ex01 modify column col3 int;

#계약 조건 추가
ALTER TABLE ex01 ADD PRIMARY KEY (col1);

#계약 조건 삭제
ALTER TABLE ex01 DROP PRIMARY KEY;

# TBL_ANIMAL테이블 생성
CREATE TABLE TBL_ANIMAL (
	id INT PRIMARY KEY,
	type VARCHAR(100),
	age INT,
	feed VARCHAR(100)        
);

ALTER TABLE ex01 ADD PRIMARY KEY (col1);

ALTER TABLE TBL_ANIMAL DROP PRIMARY KEY;

ALTER TABLE TBL_ANIMAL add PRIMARY key (id);

drop table tbl_animal ;


USE academy_db;

CREATE TABLE TBL_STUDENT (
	id int primary key,
	name varchar(100),
	major varchar(100),
	gender char(1) not null default 'W',
	birth date,
	constraint ban_char check (gender in ('M','W')),
	constraint ban_date check (birth >= '1980-01-01')	
);



